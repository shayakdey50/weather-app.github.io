let search=document.getElementById("searchBox"),place=document.getElementById("city"),temp=document.getElementById("temp"),weatherType=document.getElementById("weather_type"),date=document.getElementById("date"),weatherImg=document.getElementById("weather_icon_img"),currentHum=document.getElementById("humidity"),currentPres=document.getElementById("pressure"),currentWind=document.getElementById("wind"),currentUv=document.getElementById("uv"),weekOneDay=document.getElementById("week_one_day"),weekOneDate=document.getElementById("week_one_date"),weekOneImg=document.getElementById("week_one_img"),weekOneHum=document.getElementById("week_one_hum"),weekOneMax=document.getElementById("week_one_max"),weekOneMin=document.getElementById("week_one_min"),weekOneWind=document.getElementById("week_one_wind"),weekTwoDay=document.getElementById("week_two_day"),weekTwoDate=document.getElementById("week_two_date"),weekTwoImg=document.getElementById("week_two_img"),weekTwoHum=document.getElementById("week_two_hum"),weekTwoMax=document.getElementById("week_two_max"),weekTwoMin=document.getElementById("week_two_min"),weekTwoWind=document.getElementById("week_two_wind"),weekThreeDay=document.getElementById("week_three_day"),weekThreeDate=document.getElementById("week_three_date"),weekThreeImg=document.getElementById("week_three_img"),weekThreeHum=document.getElementById("week_three_hum"),weekThreeMax=document.getElementById("week_three_max"),weekThreeMin=document.getElementById("week_three_min"),weekThreeWind=document.getElementById("week_three_wind"),weekFourDay=document.getElementById("week_four_day"),weekFourDate=document.getElementById("week_four_date"),weekFourImg=document.getElementById("week_four_img"),weekFourHum=document.getElementById("week_four_hum"),weekFourMax=document.getElementById("week_four_max"),weekFourMin=document.getElementById("week_four_min"),weekFourWind=document.getElementById("week_four_wind");const weather={link:"https://api.openweathermap.org/data/2.5/onecall?",key:"bc56f893b38b620b18e302bcda73748b"},geocoding={link:"https://api.mapbox.com/geocoding/v5/mapbox.places",key:"pk.eyJ1Ijoic2hheWFrZGV5IiwiYSI6ImNrczFqeWRmdzB4dW0yd3Bqa2Q4NDNmNzIifQ.BixBymHpnc-r1uMS0_Vm_w"};function getWeather(e,t){fetch(`${weather.link}lat=${e}&lon=${t}&exclude=hourly,minutely&appid=${weather.key}&units=metric`).then((e=>e.json())).then(showWeather)}function showWeather(e){place.innerText=`${e.timezone}`,temp.innerHTML=`${Math.round(e.current.temp)}&deg;c`,weatherType.innerText=`${e.current.weather[0].main}`,date.innerText=dateManage(todayDate),currentHum.innerText=`${e.current.humidity}%`,currentPres.innerText=`${e.current.pressure} hPa`,currentWind.innerText=`${e.current.wind_speed} km/hr`,currentUv.innerText=`${e.current.uvi}`;let t=`${e.current.weather[0].id}`;t>=200&&t<=299&&(weatherImg.src="src/images/thunder.svg"),t>=300&&t<=499&&(weatherImg.src="src/images/rainy-7.svg"),t>=500&&t<=510&&(weatherImg.src="src/images/rainy-3.svg"),511===t&&(weatherImg.src="src/images/snowy-6.svg"),t>=512&&t<=599&&(weatherImg.src="src/images/rainy-7.svg"),t>=600&&t<=699&&(weatherImg.src="src/images/snowy-6.svg"),t>=700&&t<=799&&(weatherImg.src="src/images/mist.svg",weatherImg.style.width="159px"),800===t&&(weatherImg.src="src/images/day.svg"),801===t&&(weatherImg.src="src/images/cloudy-day-3.svg"),t>=802&&t<=804&&(weatherImg.src="src/images/cloudy.svg");let n="http://openweathermap.org/img/wn/";weekOneDay.innerText=`${window.moment(1e3*e.daily[1].dt).format("ddd")}`,weekOneDate.innerText=moment().add(1,"days").format("DD-MM-YYYY"),weekOneImg.src=`${n}/${e.daily[1].weather[0].icon}@2x.png`,weekOneHum.innerText=`${e.daily[1].humidity}%`,weekOneMax.innerHTML=`${Math.round(e.daily[1].temp.max)}&deg`,weekOneMin.innerHTML=`${Math.round(e.daily[1].temp.min)}&deg`,weekOneWind.innerText=`${e.daily[1].wind_speed}`,weekTwoDay.innerText=`${window.moment(1e3*e.daily[2].dt).format("ddd")}`,weekTwoDate.innerText=moment().add(2,"days").format("DD-MM-YYYY"),weekTwoImg.src=`${n}/${e.daily[2].weather[0].icon}@2x.png`,weekTwoHum.innerText=`${e.daily[2].humidity}%`,weekTwoMax.innerHTML=`${Math.round(e.daily[2].temp.max)}&deg`,weekTwoMin.innerHTML=`${Math.round(e.daily[2].temp.min)}&deg`,weekTwoWind.innerText=`${e.daily[2].wind_speed}`,weekThreeDay.innerText=`${window.moment(1e3*e.daily[3].dt).format("ddd")}`,weekThreeDate.innerText=moment().add(3,"days").format("DD-MM-YYYY"),weekThreeImg.src=`${n}/${e.daily[3].weather[0].icon}@2x.png`,weekThreeHum.innerText=`${e.daily[3].humidity}%`,weekThreeMax.innerHTML=`${Math.round(e.daily[3].temp.max)}&deg`,weekThreeMin.innerHTML=`${Math.round(e.daily[3].temp.min)}&deg`,weekThreeWind.innerText=`${e.daily[3].wind_speed}`,weekFourDay.innerText=`${window.moment(1e3*e.daily[4].dt).format("ddd")}`,weekFourDate.innerText=moment().add(4,"days").format("DD-MM-YYYY"),weekFourImg.src=`${n}/${e.daily[4].weather[0].icon}@2x.png`,weekFourHum.innerText=`${e.daily[4].humidity}%`,weekFourMax.innerHTML=`${Math.round(e.daily[4].temp.max)}&deg`,weekFourMin.innerHTML=`${Math.round(e.daily[4].temp.min)}&deg`,weekFourWind.innerText=`${e.daily[4].wind_speed}`}"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((e=>{getWeather(e.coords.latitude,e.coords.longitude)}),(e=>{}));var todayDate=new Date;function dateManage(e){let t=e.getFullYear(),n=["Jan","Feb","March","April","May","June","July","Aug","Sep","Oct","Novem","Decem"][e.getMonth()],d=e.getDate();return`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]}, ${d} ${n} ${t}`}function getCityWeather(e){fetch(`${geocoding.link}/${e}.json?access_token=${geocoding.key}`).then((e=>e.json())).then(showCityweather)}function showCityweather(e){let t=`${e.features[0].geometry.coordinates[0]}`;getWeather(`${e.features[0].geometry.coordinates[1]}`,t)}search.addEventListener("keypress",(e=>{13==e.keyCode&&getCityWeather(search.value)}));